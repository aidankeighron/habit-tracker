# Database Setup Instructions

To sync your habit data to PostgreSQL, we recommend using **Supabase**. It provides a hosted PostgreSQL database with a secure API that can be used directly from your React Native app.

## 1. Create a Supabase Project
1.  Go to [supabase.com](https://supabase.com/) and sign up/log in.
2.  Click **"New Project"**.
3.  Enter a name (e.g., `HabitTracker`) and a strong database password.
4.  Choose a region close to you.
5.  Click **"Create new project"**.

## 2. Get API Keys
Once your project is ready (it takes a minute):
1.  Go to **Project Settings** (gear icon) -> **API**.
2.  Find the **Project URL** and **anon public** key.
    *   **Project URL**: e.g., `https://xyz.supabase.co`
    *   **Anon Public Key**: A long string starting with `ey...`
3.  You will need these two values to configure the app.

## 3. Create the Table
Go to the **SQL Editor** (terminal icon) in the Supabase dashboard sidebar and run the following SQL script to create the necessary table and security policies.

```sql
-- Create the table
CREATE TABLE public.habits (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id UUID NOT NULL,
    date DATE NOT NULL,
    habit_type TEXT NOT NULL,
    value NUMERIC NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    
    -- Ensure we don't have duplicates for the same day/habit/user
    CONSTRAINT unique_habit_entry UNIQUE (user_id, date, habit_type)
);

-- Enable Row Level Security (RLS)
ALTER TABLE public.habits ENABLE ROW LEVEL SECURITY;

-- Create a policy that allows anyone with the anon key to READ/WRITE rows
-- (Note: In a production app with auth, you would restrict this to auth.uid() = user_id)
-- For this simple tracker without login, we allow all access but you can restrict it if you implement Auth later.
CREATE POLICY "Allow public access" ON public.habits
    FOR ALL
    USING (true)
    WITH CHECK (true);
```

4. Click **Run**.

## 4. Install Dependencies
In your project folder, run:
```bash
npm install @supabase/supabase-js react-native-url-polyfill
```
